{"remainingRequest":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/src/views/trace/retailer/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/src/views/trace/retailer/index.vue","mtime":1645620179157},{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/cache-loader/dist/cjs.js","mtime":1645761092242},{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/babel-loader/lib/index.js","mtime":1645761092758},{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/cache-loader/dist/cjs.js","mtime":1645761092242},{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/vue-loader/lib/index.js","mtime":1645761092929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxpc3REZXB0LCBnZXREZXB0LCBkZWxEZXB0LCBhZGREZXB0LCB1cGRhdGVEZXB0LCBsaXN0RGVwdEV4Y2x1ZGVDaGlsZCB9IGZyb20gJ0AvYXBpL3N5c3RlbS9kZXB0JzsKaW1wb3J0IHthZGRUcmFuc3BvcnQsIGxpc3RDcm9wcyxjaGFuZ2VJblRvT3V0fSBmcm9tICcuLi8uLi8uLi9hcGkvdHJhY2UvbWF0ZXJpYWwnOwppbXBvcnQgVHJlZXNlbGVjdCBmcm9tICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCc7CmltcG9ydCAnQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MnOwppbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvaW5kZXguanMnOwppbXBvcnQge3VwbG9kSW1hZ2VzQmFzZTY0LGdldEFsbERyaXZlckJ5RGVwdElkLGdldEZhY3RvcnlCeURlcHRJZH0gZnJvbSAnLi4vLi4vLi4vYXBpL3RyYWNlL2Zhcm1lcic7CmltcG9ydCB7cXVlcnlDcm9wc0xpc3QgfSBmcm9tICcuLi8uLi8uLi9hcGkvdHJhY2UvcHJvZHVjdCc7CmltcG9ydCB7dXBkYXRlUmVjZWl2ZVN0YXR1cyB9IGZyb20gJy4uLy4uLy4uL2FwaS90cmFjZS9yZXRhaWxlcic7CmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6ICdEZXB0JywKCWNvbXBvbmVudHM6IHsgVHJlZXNlbGVjdCB9LAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlpbWFnZVVybDonJywKCQkJbm90aWNlRGV0YWlEaWFsb2c6IGZhbHNlLAoJCQkvLyDpga7nvanlsYIKCQkJbG9hZGluZzogdHJ1ZSwKCQkJLy8g5pi+56S65pCc57Si5p2h5Lu2CgkJCXNob3dTZWFyY2g6IHRydWUsCgkJCS8vIOihqOagvOagkeaVsOaNrgoJCQlkZXB0TGlzdDogW10sCgkJCS8vIOmDqOmXqOagkemAiemhuQoJCQlkZXB0T3B0aW9uczogW10sCgkJCS8vIOW8ueWHuuWxguagh+mimAoJCQl0aXRsZTogJycsCgkJCS8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggoJCQlvcGVuOiBmYWxzZSwKCQkJLy8g54q25oCB5pWw5o2u5a2X5YW4CgkJCXN0YXR1c09wdGlvbnM6IFtdLAoJCQkvLyDmn6Xor6Llj4LmlbAKCQkJcXVlcnlQYXJhbXM6IHsKCQkJCWRlcHROYW1lOiB1bmRlZmluZWQsCgkJCQlzdGF0dXM6IHVuZGVmaW5lZAoJCQl9LAoJCQkvLyDooajljZXlj4LmlbAKCQkJZm9ybToge30sCgoJCQl0cmFuc3BvcnRMaXN0OiBbXSwKCQkJY2l0eURldGFpbDogJycsCgkJCWxuZzogTnVtYmVyLAoJCQlsYXQ6IE51bWJlciwKCQkJaW1nQmFzZTY0OicnLAoJCQlUZXN0aW5nUGhvdG9Vcmw6JycsCgkJCWNoZWNrSW5mbzonJywKCQkJZHJpdmVyTGlzdDpbXSwKCQkJbm90aWNlVHJhbnNwb3J0RGlhbG9nOmZhbHNlLAoJCQl0cmFzcG9ydEZvcm06e30sCgkJCWZhY3RvcnlMaXN0OltdLAoJCQl0cmFjZUlkRGlhbG9nOmZhbHNlLAoJCQlyZXRhaWxlckluZm86JycKCQl9OwoJfSwKCWNyZWF0ZWQoKSB7CgkJdGhpcy5nZXRMaXN0KCk7Cgl9LAoKCW1vdW50ZWQoKSB7CgkJLy90aGlzLnFyY29kZSgpOwoJfSwKCgltZXRob2RzOiB7CgkJLy/ojrflj5bkuqflk4Hmuq/mupBJRAoJCWdldFRyYWNlSWQocm93KXsKCQkJY29uc3QgcmV0YWlsZXJBcnJheSA9IFtdCgkJCXJldGFpbGVyQXJyYXkucHVzaChyb3cuY3JvcHNJZCkKCQkJcmV0YWlsZXJBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmFtZSkKCQkJdGhpcy4kaHR0cEJsb2NrCgkJCQkuZ2V0KHRoaXMuJGh0dHBVcmwgKyAnL3JldGFpbGVyYXBpL3F1ZXJ5UmV0YWlsZXJCeUNyb3BzSWQ/Y3JvcHNJZD0nK3Jvdy5jcm9wc0lkKycmcmV0YWlsZXJJZD0nK3RoaXMuJHN0b3JlLmdldHRlcnMubmFtZSkKCQkJCS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEubGVuZ3RoIDwgMSl7CiAgICAgICAgICAgIHRoaXMubXNnRXJyb3IoIuivt+WFiOetvuaUtuWQjuWGjeiOt+WPliIpOwogICAgICAgICAgfWVsc2UgewogICAgICAgICAgICB0aGlzLnRyYWNlSWREaWFsb2cgPSB0cnVlCiAgICAgICAgICAgIHRoaXMucmV0YWlsZXJJbmZvID0gcmVzLmRhdGFbMF0uUmVjb3JkOwogICAgICAgICAgfQoKCQkJCX0pCgkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQl0aGlzLm1zZ0Vycm9yKCflrZjlgqjlvILluLggJyArIGVycik7CgkJCQl9KTsKCQl9LAoKCQkvL+etvuaUtgoJCXJlY2VpdmUocm93KXsKCQkJY29uc3QgcmV0YWlsZXJBcnJheSA9IFtdCgkJCWNvbnN0IGlkID0gbmV3IHRoaXMuJHNub3dGbGFrZUlkKCkuZ2VuZXJhdGUoKTsKCQkJcmV0YWlsZXJBcnJheS5wdXNoKGlkKQoJCQlyZXRhaWxlckFycmF5LnB1c2goaWQpCgkJCXJldGFpbGVyQXJyYXkucHVzaChyb3cuY3JvcHNJZCkKCQkJcmV0YWlsZXJBcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmlja05hbWUpCgkJCXJldGFpbGVyQXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLm5hbWUpCgkJCXJldGFpbGVyQXJyYXkucHVzaCh0aGlzLiRzdG9yZS5nZXR0ZXJzLnBob25lbnVtYmVyKQoJCQlyZXRhaWxlckFycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZSkKCQkJcmV0YWlsZXJBcnJheS5wdXNoKCfpm7bllK7llYbllK7ljZYnKQoJCQl0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTnrb7mlLYnK3Jvdy5jcm9wc05hbWUsICfnrb7mlLYnLCB7CgkJCQljb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCgkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCXR5cGU6ICd3YXJuaW5nJwoJCQl9KQoJCQkJLnRoZW4oKCkgPT4gewoJCQkJCXRoaXMuJGh0dHBCbG9jawoJCQkJCQkucG9zdCh0aGlzLiRodHRwVXJsICsgJy9yZXRhaWxlcmFwaS9jcmVhdGVSZXRhaWxlcicsIHsgcmV0YWlsZXJBcnJheTogcmV0YWlsZXJBcnJheSB9KQoJCQkJCQkudGhlbihyZXMgPT4gewoJCQkJCQkJaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewoJCQkJCQkJCWNvbnN0IGluZm8gPSB7CgkJCQkJCQkJCWNyb3BzSWQ6cm93LmNyb3BzSWQsCgkJCQkJCQkJCWZhY3RvcnlJZDp0aGlzLiRzdG9yZS5nZXR0ZXJzLmRlcHRJZCwKCQkJCQkJCQl9CgkJCQkJCQkJdXBkYXRlUmVjZWl2ZVN0YXR1cyhpbmZvKS50aGVuKCgpID0+IHsKCQkJCQkJCQkJdGhpcy5tc2dTdWNjZXNzKCLnrb7mlLbmiJDlip8iKTsKCQkJCQkJCQkJdGhpcy5nZXRMaXN0KCk7CgkJCQkJCQkJfSkuY2F0Y2goZXJyID0+IHsKCQkJCQkJCQkJdGhpcy5tc2dFcnJvcigi562+5pS25aSx6LSlIikKCQkJCQkJCQl9KQoJCQkJCQkJfQoJCQkJCQl9KQoJCQkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQkJCXRoaXMubXNnRXJyb3IoJ+WtmOWCqOW8guW4uCAnICsgZXJyKTsKCQkJCQkJfSk7CgkJCX0pCgkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCXRoaXMuJG1lc3NhZ2UoewoJCQkJCQl0eXBlOiAnaW5mbycsCgkJCQkJCW1lc3NhZ2U6ICflj5bmtognCgkJCQkJfSk7CgkJCQl9KTsKCQl9LAoKCQlhZGROb3RpY2VUcmFzcG9ydCgpewoJCQl0aGlzLnRyYXNwb3J0Rm9ybS5jcm9wc0lkID0gdGhpcy5jaGVja0luZm8uY3JvcHNJZDsKCQkJdGhpcy50cmFzcG9ydEZvcm0uZmFybWVyVXNlck5hbWUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLm5hbWU7CgkJCXRoaXMudHJhc3BvcnRGb3JtLmZhcm1lck5pY2tOYW1lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5uaWNrTmFtZTsKCQkJdGhpcy50cmFzcG9ydEZvcm0udGltZSA9IG5ldyBEYXRlKCk7CgkJCXRoaXMudHJhc3BvcnRGb3JtLmRyaXZlcklkID0gdGhpcy50cmFzcG9ydEZvcm0udXNlck5hbWU7CgkJCXRoaXMudHJhc3BvcnRGb3JtLnN0YXR1cyA9IDA7CgkJCXRoaXMudHJhc3BvcnRGb3JtLmZhcm1lclRlbCA9IHRoaXMuJHN0b3JlLmdldHRlcnMucGhvbmVudW1iZXI7CgkJCXRoaXMudHJhc3BvcnRGb3JtLmZhcm1lckRlcHQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmRlcHROYW1lOwoJCQl0aGlzLnRyYXNwb3J0Rm9ybS5mYWN0b3J5SWQgPSB0aGlzLnRyYXNwb3J0Rm9ybS5kZXB0SWQKCQkJYWRkVHJhbnNwb3J0KHRoaXMudHJhc3BvcnRGb3JtKQoJCQkJLnRoZW4ocmVzID0+IHsKCQkJCQl0aGlzLm1zZ1N1Y2Nlc3MoJ+iBlOezu+i/kOi+k+aIkOWKnycpOwoJCQkJCXRoaXMubm90aWNlRGV0YWlEaWFsb2cgPSBmYWxzZTsKCQkJCX0pCgkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQl0aGlzLm1zZ0Vycm9yKCfogZTns7vov5DovpPlpLHotKXvvIzlj5HnlJ/lvILluLgnKTsKCQkJCX0pOwoJCX0sCgoJCW5vdGljZVRyYW5zcG9ydChyb3cpewoJCQl0aGlzLmNoZWNrSW5mbyA9IHJvdzsKCQkJdGhpcy5ub3RpY2VEZXRhaURpYWxvZyA9IHRydWUKCQkJZ2V0QWxsRHJpdmVyQnlEZXB0SWQodGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0SWQpCgkJCQkudGhlbihyZXMgPT4gewoJCQkJCXRoaXMuZHJpdmVyTGlzdCA9IHJlcy5kYXRhOwoJCQkJfSkKCQkJCS5jYXRjaChlcnIgPT4ge30pOwoJCQlnZXRGYWN0b3J5QnlEZXB0SWQoMTIzKQoJCQkJLnRoZW4ocmVzID0+IHsKCQkJCQl0aGlzLmZhY3RvcnlMaXN0ID0gcmVzLmRhdGE7CgkJCQl9KQoJCX0sCgoJCS8qKgoJCSAqIOWHuuW6kwoJCSAqLwoJCW91dEZhY3Rvcnkocm93KXsKCQkJdGhpcy5jaGVja0luZm8gPSByb3c7CgkJCXRoaXMub3BlbiA9IHRydWUKCQl9LAoKCQljcmVhdGVNYWNoaW5nKCl7CgkJICAgIGNvbnN0IGNoZWNrSW5mb0FycmF5ID0gW10KCQkJY29uc3QgaWQgPSBuZXcgdGhpcy4kc25vd0ZsYWtlSWQoKS5nZW5lcmF0ZSgpOwoJCQljaGVja0luZm9BcnJheS5wdXNoKGlkKQoJCQljaGVja0luZm9BcnJheS5wdXNoKGlkKQoJCQljaGVja0luZm9BcnJheS5wdXNoKHRoaXMuJHN0b3JlLmdldHRlcnMubmlja05hbWUpCgkJCWNoZWNrSW5mb0FycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5waG9uZW51bWJlcik7CgkJCWNoZWNrSW5mb0FycmF5LnB1c2godGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0TmFtZSk7CgkJCWNoZWNrSW5mb0FycmF5LnB1c2godGhpcy5jaGVja0luZm8uY3JvcHNJZCk7CgkJCWNoZWNrSW5mb0FycmF5LnB1c2godGhpcy5mb3JtLnRlc3RpbmdSZXN1bHQpOwoJCQljaGVja0luZm9BcnJheS5wdXNoKHRoaXMuY2hlY2tJbmZvLnRpbWUpOwoJCQljaGVja0luZm9BcnJheS5wdXNoKGZvcm1hdERhdGUobmV3IERhdGUoKSkpOwoJCQljaGVja0luZm9BcnJheS5wdXNoKHRoaXMuVGVzdGluZ1Bob3RvVXJsKTsKCQkJY2hlY2tJbmZvQXJyYXkucHVzaCh0aGlzLmZvcm0ucmVtYXJrcyk7CgkJCXRoaXMuJGh0dHBCbG9jawoJCQkJLnBvc3QodGhpcy4kaHR0cFVybCArICcvbWF0ZXJpYWxhcGkvY3JlYXRlTWFjaGluZycsIHsgY2hlY2tJbmZvQXJyYXk6IGNoZWNrSW5mb0FycmF5IH0pCgkJCQkudGhlbihyZXMgPT4gewoJCQkJCWlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKCQkJCQkJY2hhbmdlSW5Ub091dCh0aGlzLmNoZWNrSW5mby5jcm9wc0lkKS50aGVuKHJlcyA9PiB7CgkJCQkJCQl0aGlzLm1zZ1N1Y2Nlc3MoIuWHuuW6k+aIkOWKnyIpCgkJCQkJCQl0aGlzLmdldExpc3QoKTsKCQkJCQkJfSkuY2F0Y2goZXJyID0+IHsKCQkJCQkJCXRoaXMubXNnRXJyb3IoIuWHuuW6k+Wksei0pSIpCgkJCQkJCX0pCgkJCQkJCXRoaXMub3BlbiA9IGZhbHNlOwoJCQkJCX0KCQkJCX0pCgkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQl0aGlzLm1zZ0Vycm9yKCflrZjlgqjlvILluLggJyArIGVycik7CgkJCQl9KTsKCQl9LAoKCQlnZXRGaWxlKGZpbGUpIHsKCQkJdGhpcy5pbWFnZVVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5yYXcpOwoJCQl0aGlzLmdldEJhc2U2NChmaWxlLnJhdykudGhlbihyZXMgPT4gewoJCQkJdGhpcy5pbWdCYXNlNjQgPSByZXM7CgkJCQljb25zdCBkYXRhcyA9IHsKCQkJCQlpbWFnZUJhc2U2NDogdGhpcy5pbWdCYXNlNjQKCQkJCX07CgkJCQl1cGxvZEltYWdlc0Jhc2U2NChkYXRhcykKCQkJCQkudGhlbihyZXMgPT4gewoJCQkJCQl0aGlzLlRlc3RpbmdQaG90b1VybCA9IHJlcy5tc2c7CgkJCQkJCXRoaXMubXNnU3VjY2Vzcygn5Zu+54mH5LiK5Lyg5oiQ5YqfJyk7CgkJCQkJfSkKCQkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQkJdGhpcy5tc2dFcnJvcign5Zu+54mH5LiK5Lyg5aSx6LSlJyk7CgkJCQkJfSk7CgkJCX0pOwoJCX0sCgoJCWdldEJhc2U2NChmaWxlKSB7CgkJCXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKCQkJCWNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CgkJCQlsZXQgaW1nUmVzdWx0ID0gJyc7CgkJCQlyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKCQkJCXJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJCQlpbWdSZXN1bHQgPSByZWFkZXIucmVzdWx0OwoJCQkJfTsKCQkJCXJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHsKCQkJCQlyZWplY3QoZXJyb3IpOwoJCQkJfTsKCQkJCXJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHsKCQkJCQlyZXNvbHZlKGltZ1Jlc3VsdCk7CgkJCQl9OwoJCQl9KTsKCQl9LAoKCgkJZ2V0TGlzdCgpIHsKCQkJcXVlcnlDcm9wc0xpc3QodGhpcy4kc3RvcmUuZ2V0dGVycy5kZXB0SWQpLnRoZW4ocmVzID0+IHsKCQkJCXRoaXMudHJhbnNwb3J0TGlzdCA9IHJlcy5kYXRhOwoJCQl9KTsKCQl9LAoJCS8qKiDovazmjaLpg6jpl6jmlbDmja7nu5PmnoQgKi8KCQlub3JtYWxpemVyKG5vZGUpIHsKCQkJaWYgKG5vZGUuY2hpbGRyZW4gJiYgIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7CgkJCQlkZWxldGUgbm9kZS5jaGlsZHJlbjsKCQkJfQoJCQlyZXR1cm4gewoJCQkJaWQ6IG5vZGUuZGVwdElkLAoJCQkJbGFiZWw6IG5vZGUuZGVwdE5hbWUsCgkJCQljaGlsZHJlbjogbm9kZS5jaGlsZHJlbgoJCQl9OwoJCX0sCgkJLy8g5a2X5YW454q25oCB5a2X5YW457+76K+RCgkJc3RhdHVzRm9ybWF0KHJvdywgY29sdW1uKSB7CgkJCXJldHVybiB0aGlzLnNlbGVjdERpY3RMYWJlbCh0aGlzLnN0YXR1c09wdGlvbnMsIHJvdy5zdGF0dXMpOwoJCX0sCgkJLy8g5Y+W5raI5oyJ6ZKuCgkJY2FuY2VsKCkgewoJCQl0aGlzLm9wZW4gPSBmYWxzZTsKCQkJdGhpcy5yZXNldCgpOwoJCX0sCgkJLy8g6KGo5Y2V6YeN572uCgkJcmVzZXQoKSB7CgkJCXRoaXMuZm9ybSA9IHsKCQkJCWRlcHRJZDogdW5kZWZpbmVkLAoJCQkJcGFyZW50SWQ6IHVuZGVmaW5lZCwKCQkJCWRlcHROYW1lOiB1bmRlZmluZWQsCgkJCQlvcmRlck51bTogdW5kZWZpbmVkLAoJCQkJbGVhZGVyOiB1bmRlZmluZWQsCgkJCQlwaG9uZTogdW5kZWZpbmVkLAoJCQkJZW1haWw6IHVuZGVmaW5lZCwKCQkJCXN0YXR1czogJzAnCgkJCX07CgkJCXRoaXMucmVzZXRGb3JtKCdmb3JtJyk7CgkJfSwKCQkvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovCgkJaGFuZGxlUXVlcnkoKSB7CgkJCXRoaXMuZ2V0TGlzdCgpOwoJCX0sCgkJLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLwoJCXJlc2V0UXVlcnkoKSB7CgkJCXRoaXMucmVzZXRGb3JtKCdxdWVyeUZvcm0nKTsKCQkJdGhpcy5oYW5kbGVRdWVyeSgpOwoJCX0sCgkJLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLwoJCWhhbmRsZUFkZChyb3cpIHsKCQkJdGhpcy5yZXNldCgpOwoJCQlpZiAocm93ICE9IHVuZGVmaW5lZCkgewoJCQkJdGhpcy5mb3JtLnBhcmVudElkID0gcm93LmRlcHRJZDsKCQkJfQoJCQl0aGlzLm9wZW4gPSB0cnVlOwoJCQl0aGlzLnRpdGxlID0gJ+a3u+WKoOmDqOmXqCc7CgkJCWxpc3REZXB0KCkudGhlbihyZXNwb25zZSA9PiB7CgkJCQl0aGlzLmRlcHRPcHRpb25zID0gdGhpcy5oYW5kbGVUcmVlKHJlc3BvbnNlLmRhdGEsICdkZXB0SWQnKTsKCQkJfSk7CgkJfSwKCQkvKiog5L+u5pS55oyJ6ZKu5pON5L2cICovCgkJaGFuZGxlVXBkYXRlKHJvdykgewoJCQl0aGlzLnJlc2V0KCk7CgkJCWdldERlcHQocm93LmRlcHRJZCkudGhlbihyZXNwb25zZSA9PiB7CgkJCQl0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOwoJCQkJdGhpcy5vcGVuID0gdHJ1ZTsKCQkJCXRoaXMudGl0bGUgPSAn5L+u5pS56YOo6ZeoJzsKCQkJfSk7CgkJCWxpc3REZXB0RXhjbHVkZUNoaWxkKHJvdy5kZXB0SWQpLnRoZW4ocmVzcG9uc2UgPT4gewoJCQkJdGhpcy5kZXB0T3B0aW9ucyA9IHRoaXMuaGFuZGxlVHJlZShyZXNwb25zZS5kYXRhLCAnZGVwdElkJyk7CgkJCX0pOwoJCX0sCgkJLyoqIOaPkOS6pOaMiemSriAqLwoJCXN1Ym1pdEZvcm06IGZ1bmN0aW9uKCkgewoJCQl0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUodmFsaWQgPT4gewoJCQkJaWYgKHZhbGlkKSB7CgkJCQkJaWYgKHRoaXMuZm9ybS5kZXB0SWQgIT0gdW5kZWZpbmVkKSB7CgkJCQkJCXVwZGF0ZURlcHQodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsKCQkJCQkJCWlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKCQkJCQkJCQl0aGlzLm1zZ1N1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpOwoJCQkJCQkJCXRoaXMub3BlbiA9IGZhbHNlOwoJCQkJCQkJCXRoaXMuZ2V0TGlzdCgpOwoJCQkJCQkJfQoJCQkJCQl9KTsKCQkJCQl9IGVsc2UgewoJCQkJCQlhZGREZXB0KHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7CgkJCQkJCQlpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CgkJCQkJCQkJdGhpcy5tc2dTdWNjZXNzKCfmlrDlop7miJDlip8nKTsKCQkJCQkJCQl0aGlzLm9wZW4gPSBmYWxzZTsKCQkJCQkJCQl0aGlzLmdldExpc3QoKTsKCQkJCQkJCX0KCQkJCQkJfSk7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCQl9LAoJCS8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8KCQloYW5kbGVEZWxldGUocm93KSB7CgkJCXRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOWQjeensOS4uiInICsgcm93LmRlcHROYW1lICsgJyLnmoTmlbDmja7pobk/JywgJ+itpuWRiicsIHsKCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAoJCQkJdHlwZTogJ3dhcm5pbmcnCgkJCX0pCgkJCQkudGhlbihmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gZGVsRGVwdChyb3cuZGVwdElkKTsKCQkJCX0pCgkJCQkudGhlbigoKSA9PiB7CgkJCQkJdGhpcy5nZXRMaXN0KCk7CgkJCQkJdGhpcy5tc2dTdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKCQkJCX0pCgkJCQkuY2F0Y2goZnVuY3Rpb24oKSB7fSk7CgkJfQoJfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/trace/retailer","sourcesContent":["<template>\n\t<div class=\"app-container\">\n\n\t\t<el-divider>待处理业务</el-divider>\n\n\t\t<br />\n\t\t<el-table :data=\"transportList\">\n\t\t\t<el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n\t\t\t<el-table-column label=\"产品编号\" prop=\"cropsId\" />\n\t\t\t<el-table-column label=\"产品名称\" prop=\"cropsName\" />\n\t\t\t<el-table-column label=\"产品来源\" prop=\"farmerDept\" />\n\t\t\t<el-table-column label=\"时间\" prop=\"time\" />\n\t\t\t<el-table-column label=\"签收状态\" prop=\"retailerReceiveStatus\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<el-tag v-show=\"scope.row.retailerReceiveStatus === null\">未签收</el-tag>\n\t\t\t\t\t<el-tag v-show=\"scope.row.retailerReceiveStatus === 1\">已签收</el-tag>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<el-button v-show=\"scope.row.retailerReceiveStatus === null\" size=\"mini\" type=\"text\" @click=\"receive(scope.row)\">签收</el-button>\n<!--\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"noticeTransport(scope.row)\">打印条形码</el-button>-->\n\t\t\t\t\t<el-button size=\"mini\" type=\"text\" @click=\"getTraceId(scope.row)\">获取产品溯源ID</el-button>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t</el-table>\n\n\n\t\t<el-dialog :title=\"title\" :visible.sync=\"open\" width=\"700px\" append-to-body>\n\t\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n\t\t\t\t<el-row>\n\t\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t\t<el-form-item label=\"检测结果\" prop=\"nickName\"><el-input v-model=\"form.testingResult\" placeholder=\"请输入检测结果\" /></el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-row>\n\t\t\t\t<el-form-item label=\"备注\"><el-input v-model=\"form.remarks\" type=\"textarea\" placeholder=\"请输入内容\"></el-input></el-form-item>\n\t\t\t\t<el-row>\n\t\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t\t<el-form-item label=\"检测图片:\">\n\t\t\t\t\t\t\t<el-upload class=\"avatar-uploader\" :on-change=\"getFile\" :show-file-list=\"false\" :auto-upload=\"false\">\n\t\t\t\t\t\t\t\t<img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\n\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n\t\t\t\t\t\t\t</el-upload>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-row>\n\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button type=\"primary\" @click=\"createMaching\">确 定</el-button>\n\t\t\t\t<el-button @click=\"cancel\">取 消</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\n\t\t<el-dialog center title=\"联系运输\" :visible.sync=\"noticeDetaiDialog\" width=\"500px\" append-to-body>\n\t\t\t<el-form ref=\"form\" :model=\"trasportForm\" label-width=\"80px\">\n\t\t\t\t<el-row>\n\t\t\t\t\t<el-col :span=\"24\">\n\t\t\t\t\t\t<el-form-item label=\"选择司机\" prop=\"nickName\">\n\t\t\t\t\t\t\t<el-select v-model=\"trasportForm.userName\" placeholder=\"请选择\">\n\t\t\t\t\t\t\t\t<el-option v-for=\"user in driverList\" :key=\"user.userName\" :label=\"user.nickName\" :value=\"user.userName\"></el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-row>\n\t\t\t\t<el-row>\n\t\t\t\t\t<el-col :span=\"24\">\n\t\t\t\t\t\t<el-form-item label=\"生产厂商\" prop=\"nickName\">\n\t\t\t\t\t\t\t<el-select v-model=\"trasportForm.deptId\" placeholder=\"请选择\">\n\t\t\t\t\t\t\t\t<el-option v-for=\"dept in factoryList\" :key=\"dept.deptId\" :label=\"dept.deptName\" :value=\"dept.deptId\"></el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-row>\n\t\t\t\t<el-form-item label=\"备注\"><el-input v-model=\"trasportForm.remarks\" type=\"textarea\" placeholder=\"请输入内容\"></el-input></el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button type=\"primary\" @click=\"addNoticeTrasport\">确 定</el-button>\n\t\t\t\t<el-button @click=\"cancel\">取 消</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\n\t\t<el-dialog center title=\"产品溯源ID\" :visible.sync=\"traceIdDialog\" width=\"500px\" append-to-body>\n\t\t\t<json-viewer :value=\"retailerInfo.product_id\" expand-depth=5 copyable boxed></json-viewer>\n\t\t</el-dialog>\n\n\t</div>\n</template>\n\n<script>\nimport { listDept, getDept, delDept, addDept, updateDept, listDeptExcludeChild } from '@/api/system/dept';\nimport {addTransport, listCrops,changeInToOut} from '../../../api/trace/material';\nimport Treeselect from '@riophae/vue-treeselect';\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css';\nimport { formatDate } from '../../../utils/index.js';\nimport {uplodImagesBase64,getAllDriverByDeptId,getFactoryByDeptId} from '../../../api/trace/farmer';\nimport {queryCropsList } from '../../../api/trace/product';\nimport {updateReceiveStatus } from '../../../api/trace/retailer';\nexport default {\n\tname: 'Dept',\n\tcomponents: { Treeselect },\n\tdata() {\n\t\treturn {\n\t\t\timageUrl:'',\n\t\t\tnoticeDetaiDialog: false,\n\t\t\t// 遮罩层\n\t\t\tloading: true,\n\t\t\t// 显示搜索条件\n\t\t\tshowSearch: true,\n\t\t\t// 表格树数据\n\t\t\tdeptList: [],\n\t\t\t// 部门树选项\n\t\t\tdeptOptions: [],\n\t\t\t// 弹出层标题\n\t\t\ttitle: '',\n\t\t\t// 是否显示弹出层\n\t\t\topen: false,\n\t\t\t// 状态数据字典\n\t\t\tstatusOptions: [],\n\t\t\t// 查询参数\n\t\t\tqueryParams: {\n\t\t\t\tdeptName: undefined,\n\t\t\t\tstatus: undefined\n\t\t\t},\n\t\t\t// 表单参数\n\t\t\tform: {},\n\n\t\t\ttransportList: [],\n\t\t\tcityDetail: '',\n\t\t\tlng: Number,\n\t\t\tlat: Number,\n\t\t\timgBase64:'',\n\t\t\tTestingPhotoUrl:'',\n\t\t\tcheckInfo:'',\n\t\t\tdriverList:[],\n\t\t\tnoticeTransportDialog:false,\n\t\t\ttrasportForm:{},\n\t\t\tfactoryList:[],\n\t\t\ttraceIdDialog:false,\n\t\t\tretailerInfo:''\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.getList();\n\t},\n\n\tmounted() {\n\t\t//this.qrcode();\n\t},\n\n\tmethods: {\n\t\t//获取产品溯源ID\n\t\tgetTraceId(row){\n\t\t\tconst retailerArray = []\n\t\t\tretailerArray.push(row.cropsId)\n\t\t\tretailerArray.push(this.$store.getters.name)\n\t\t\tthis.$httpBlock\n\t\t\t\t.get(this.$httpUrl + '/retailerapi/queryRetailerByCropsId?cropsId='+row.cropsId+'&retailerId='+this.$store.getters.name)\n\t\t\t\t.then(res => {\n          if (res.data.length < 1){\n            this.msgError(\"请先签收后再获取\");\n          }else {\n            this.traceIdDialog = true\n            this.retailerInfo = res.data[0].Record;\n          }\n\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.msgError('存储异常 ' + err);\n\t\t\t\t});\n\t\t},\n\n\t\t//签收\n\t\treceive(row){\n\t\t\tconst retailerArray = []\n\t\t\tconst id = new this.$snowFlakeId().generate();\n\t\t\tretailerArray.push(id)\n\t\t\tretailerArray.push(id)\n\t\t\tretailerArray.push(row.cropsId)\n\t\t\tretailerArray.push(this.$store.getters.nickName)\n\t\t\tretailerArray.push(this.$store.getters.name)\n\t\t\tretailerArray.push(this.$store.getters.phonenumber)\n\t\t\tretailerArray.push(this.$store.getters.deptName)\n\t\t\tretailerArray.push('零售商售卖')\n\t\t\tthis.$confirm('是否确认签收'+row.cropsName, '签收', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.$httpBlock\n\t\t\t\t\t\t.post(this.$httpUrl + '/retailerapi/createRetailer', { retailerArray: retailerArray })\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\tconst info = {\n\t\t\t\t\t\t\t\t\tcropsId:row.cropsId,\n\t\t\t\t\t\t\t\t\tfactoryId:this.$store.getters.deptId,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tupdateReceiveStatus(info).then(() => {\n\t\t\t\t\t\t\t\t\tthis.msgSuccess(\"签收成功\");\n\t\t\t\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\t\tthis.msgError(\"签收失败\")\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tthis.msgError('存储异常 ' + err);\n\t\t\t\t\t\t});\n\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '取消'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\n\t\taddNoticeTrasport(){\n\t\t\tthis.trasportForm.cropsId = this.checkInfo.cropsId;\n\t\t\tthis.trasportForm.farmerUserName = this.$store.getters.name;\n\t\t\tthis.trasportForm.farmerNickName = this.$store.getters.nickName;\n\t\t\tthis.trasportForm.time = new Date();\n\t\t\tthis.trasportForm.driverId = this.trasportForm.userName;\n\t\t\tthis.trasportForm.status = 0;\n\t\t\tthis.trasportForm.farmerTel = this.$store.getters.phonenumber;\n\t\t\tthis.trasportForm.farmerDept = this.$store.getters.deptName;\n\t\t\tthis.trasportForm.factoryId = this.trasportForm.deptId\n\t\t\taddTransport(this.trasportForm)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.msgSuccess('联系运输成功');\n\t\t\t\t\tthis.noticeDetaiDialog = false;\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.msgError('联系运输失败，发生异常');\n\t\t\t\t});\n\t\t},\n\n\t\tnoticeTransport(row){\n\t\t\tthis.checkInfo = row;\n\t\t\tthis.noticeDetaiDialog = true\n\t\t\tgetAllDriverByDeptId(this.$store.getters.deptId)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.driverList = res.data;\n\t\t\t\t})\n\t\t\t\t.catch(err => {});\n\t\t\tgetFactoryByDeptId(123)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.factoryList = res.data;\n\t\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * 出库\n\t\t */\n\t\toutFactory(row){\n\t\t\tthis.checkInfo = row;\n\t\t\tthis.open = true\n\t\t},\n\n\t\tcreateMaching(){\n\t\t    const checkInfoArray = []\n\t\t\tconst id = new this.$snowFlakeId().generate();\n\t\t\tcheckInfoArray.push(id)\n\t\t\tcheckInfoArray.push(id)\n\t\t\tcheckInfoArray.push(this.$store.getters.nickName)\n\t\t\tcheckInfoArray.push(this.$store.getters.phonenumber);\n\t\t\tcheckInfoArray.push(this.$store.getters.deptName);\n\t\t\tcheckInfoArray.push(this.checkInfo.cropsId);\n\t\t\tcheckInfoArray.push(this.form.testingResult);\n\t\t\tcheckInfoArray.push(this.checkInfo.time);\n\t\t\tcheckInfoArray.push(formatDate(new Date()));\n\t\t\tcheckInfoArray.push(this.TestingPhotoUrl);\n\t\t\tcheckInfoArray.push(this.form.remarks);\n\t\t\tthis.$httpBlock\n\t\t\t\t.post(this.$httpUrl + '/materialapi/createMaching', { checkInfoArray: checkInfoArray })\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\tchangeInToOut(this.checkInfo.cropsId).then(res => {\n\t\t\t\t\t\t\tthis.msgSuccess(\"出库成功\")\n\t\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tthis.msgError(\"出库失败\")\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.open = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tthis.msgError('存储异常 ' + err);\n\t\t\t\t});\n\t\t},\n\n\t\tgetFile(file) {\n\t\t\tthis.imageUrl = URL.createObjectURL(file.raw);\n\t\t\tthis.getBase64(file.raw).then(res => {\n\t\t\t\tthis.imgBase64 = res;\n\t\t\t\tconst datas = {\n\t\t\t\t\timageBase64: this.imgBase64\n\t\t\t\t};\n\t\t\t\tuplodImagesBase64(datas)\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.TestingPhotoUrl = res.msg;\n\t\t\t\t\t\tthis.msgSuccess('图片上传成功');\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tthis.msgError('图片上传失败');\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetBase64(file) {\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\tlet imgResult = '';\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t\treader.onload = function() {\n\t\t\t\t\timgResult = reader.result;\n\t\t\t\t};\n\t\t\t\treader.onerror = function(error) {\n\t\t\t\t\treject(error);\n\t\t\t\t};\n\t\t\t\treader.onloadend = function() {\n\t\t\t\t\tresolve(imgResult);\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\n\n\t\tgetList() {\n\t\t\tqueryCropsList(this.$store.getters.deptId).then(res => {\n\t\t\t\tthis.transportList = res.data;\n\t\t\t});\n\t\t},\n\t\t/** 转换部门数据结构 */\n\t\tnormalizer(node) {\n\t\t\tif (node.children && !node.children.length) {\n\t\t\t\tdelete node.children;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: node.deptId,\n\t\t\t\tlabel: node.deptName,\n\t\t\t\tchildren: node.children\n\t\t\t};\n\t\t},\n\t\t// 字典状态字典翻译\n\t\tstatusFormat(row, column) {\n\t\t\treturn this.selectDictLabel(this.statusOptions, row.status);\n\t\t},\n\t\t// 取消按钮\n\t\tcancel() {\n\t\t\tthis.open = false;\n\t\t\tthis.reset();\n\t\t},\n\t\t// 表单重置\n\t\treset() {\n\t\t\tthis.form = {\n\t\t\t\tdeptId: undefined,\n\t\t\t\tparentId: undefined,\n\t\t\t\tdeptName: undefined,\n\t\t\t\torderNum: undefined,\n\t\t\t\tleader: undefined,\n\t\t\t\tphone: undefined,\n\t\t\t\temail: undefined,\n\t\t\t\tstatus: '0'\n\t\t\t};\n\t\t\tthis.resetForm('form');\n\t\t},\n\t\t/** 搜索按钮操作 */\n\t\thandleQuery() {\n\t\t\tthis.getList();\n\t\t},\n\t\t/** 重置按钮操作 */\n\t\tresetQuery() {\n\t\t\tthis.resetForm('queryForm');\n\t\t\tthis.handleQuery();\n\t\t},\n\t\t/** 新增按钮操作 */\n\t\thandleAdd(row) {\n\t\t\tthis.reset();\n\t\t\tif (row != undefined) {\n\t\t\t\tthis.form.parentId = row.deptId;\n\t\t\t}\n\t\t\tthis.open = true;\n\t\t\tthis.title = '添加部门';\n\t\t\tlistDept().then(response => {\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\n\t\t\t});\n\t\t},\n\t\t/** 修改按钮操作 */\n\t\thandleUpdate(row) {\n\t\t\tthis.reset();\n\t\t\tgetDept(row.deptId).then(response => {\n\t\t\t\tthis.form = response.data;\n\t\t\t\tthis.open = true;\n\t\t\t\tthis.title = '修改部门';\n\t\t\t});\n\t\t\tlistDeptExcludeChild(row.deptId).then(response => {\n\t\t\t\tthis.deptOptions = this.handleTree(response.data, 'deptId');\n\t\t\t});\n\t\t},\n\t\t/** 提交按钮 */\n\t\tsubmitForm: function() {\n\t\t\tthis.$refs['form'].validate(valid => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tif (this.form.deptId != undefined) {\n\t\t\t\t\t\tupdateDept(this.form).then(response => {\n\t\t\t\t\t\t\tif (response.code === 200) {\n\t\t\t\t\t\t\t\tthis.msgSuccess('修改成功');\n\t\t\t\t\t\t\t\tthis.open = false;\n\t\t\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\taddDept(this.form).then(response => {\n\t\t\t\t\t\t\tif (response.code === 200) {\n\t\t\t\t\t\t\t\tthis.msgSuccess('新增成功');\n\t\t\t\t\t\t\t\tthis.open = false;\n\t\t\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/** 删除按钮操作 */\n\t\thandleDelete(row) {\n\t\t\tthis.$confirm('是否确认删除名称为\"' + row.deptName + '\"的数据项?', '警告', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t})\n\t\t\t\t.then(function() {\n\t\t\t\t\treturn delDept(row.deptId);\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.getList();\n\t\t\t\t\tthis.msgSuccess('删除成功');\n\t\t\t\t})\n\t\t\t\t.catch(function() {});\n\t\t}\n\t}\n};\n</script>\n<style>\n.avatar-uploader .el-upload {\n\tborder: 1px dashed #d9d9d9;\n\tborder-radius: 6px;\n\tcursor: pointer;\n\tposition: relative;\n\toverflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n\tborder-color: #409eff;\n}\n.avatar-uploader-icon {\n\tfont-size: 28px;\n\tcolor: #8c939d;\n\twidth: 178px;\n\theight: 178px;\n\tline-height: 178px;\n\ttext-align: center;\n}\n.avatar {\n\twidth: 300px;\n\theight: 270px;\n\tdisplay: block;\n}\n\n.image {\n\twidth: 80%;\n\tdisplay: block;\n}\n</style>\n"]}]}