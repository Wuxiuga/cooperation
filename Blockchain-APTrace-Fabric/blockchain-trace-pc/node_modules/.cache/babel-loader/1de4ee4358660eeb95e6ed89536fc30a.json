{"remainingRequest":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/babel-loader/lib/index.js!/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/eslint-loader/index.js??ref--13-0!/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/src/store/modules/permission.js","dependencies":[{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/src/store/modules/permission.js","mtime":1645620179146},{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/babel.config.js","mtime":1645620179122},{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/cache-loader/dist/cjs.js","mtime":1645761092242},{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/babel-loader/lib/index.js","mtime":1645761092758},{"path":"/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/node_modules/eslint-loader/index.js","mtime":1645761092328}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGliYW9qaWFuL0Rlc2t0b3AvQmxvY2tjaGFpbi1BUFRyYWNlLUZhYnJpYy9ibG9ja2NoYWluLXRyYWNlLXBjL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMubG9hZFZpZXcgPSBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyIpOwoKdmFyIF9yb3V0ZXIgPSByZXF1aXJlKCJAL3JvdXRlciIpOwoKdmFyIF9tZW51ID0gcmVxdWlyZSgiQC9hcGkvbWVudSIpOwoKdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9sYXlvdXQvaW5kZXgiKSk7Cgp2YXIgcGVybWlzc2lvbiA9IHsKICBzdGF0ZTogewogICAgcm91dGVzOiBbXSwKICAgIGFkZFJvdXRlczogW10KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1JPVVRFUzogZnVuY3Rpb24gU0VUX1JPVVRFUyhzdGF0ZSwgcm91dGVzKSB7CiAgICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgICAgc3RhdGUucm91dGVzID0gX3JvdXRlci5jb25zdGFudFJvdXRlcy5jb25jYXQocm91dGVzKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIOeUn+aIkOi3r+eUsQogICAgR2VuZXJhdGVSb3V0ZXM6IGZ1bmN0aW9uIEdlbmVyYXRlUm91dGVzKF9yZWYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAvLyDlkJHlkI7nq6/or7fmsYLot6/nlLHmlbDmja4KICAgICAgICAoMCwgX21lbnUuZ2V0Um91dGVycykoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBhY2Nlc3NlZFJvdXRlcyA9IGZpbHRlckFzeW5jUm91dGVyKHJlcy5kYXRhKTsKICAgICAgICAgIGFjY2Vzc2VkUm91dGVzLnB1c2goewogICAgICAgICAgICBwYXRoOiAnKicsCiAgICAgICAgICAgIHJlZGlyZWN0OiAnLzQwNCcsCiAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBhY2Nlc3NlZFJvdXRlcyk7CiAgICAgICAgICByZXNvbHZlKGFjY2Vzc2VkUm91dGVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9OyAvLyDpgY3ljoblkI7lj7DkvKDmnaXnmoTot6/nlLHlrZfnrKbkuLLvvIzovazmjaLkuLrnu4Tku7blr7nosaEKCmZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVyKGFzeW5jUm91dGVyTWFwKSB7CiAgcmV0dXJuIGFzeW5jUm91dGVyTWFwLmZpbHRlcihmdW5jdGlvbiAocm91dGUpIHsKICAgIGlmIChyb3V0ZS5jb21wb25lbnQpIHsKICAgICAgLy8gTGF5b3V057uE5Lu254m55q6K5aSE55CGCiAgICAgIGlmIChyb3V0ZS5jb21wb25lbnQgPT09ICdMYXlvdXQnKSB7CiAgICAgICAgcm91dGUuY29tcG9uZW50ID0gX2luZGV4LmRlZmF1bHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcm91dGUuY29tcG9uZW50ID0gbG9hZFZpZXcocm91dGUuY29tcG9uZW50KTsKICAgICAgfQogICAgfQoKICAgIGlmIChyb3V0ZS5jaGlsZHJlbiAhPSBudWxsICYmIHJvdXRlLmNoaWxkcmVuICYmIHJvdXRlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICByb3V0ZS5jaGlsZHJlbiA9IGZpbHRlckFzeW5jUm91dGVyKHJvdXRlLmNoaWxkcmVuKTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9KTsKfQoKdmFyIGxvYWRWaWV3ID0gZnVuY3Rpb24gbG9hZFZpZXcodmlldykgewogIC8vIOi3r+eUseaHkuWKoOi9vQogIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgcmV0dXJuIHJlcXVpcmUoWyJAL3ZpZXdzLyIuY29uY2F0KHZpZXcpXSwgcmVzb2x2ZSk7CiAgfTsKfTsKCmV4cG9ydHMubG9hZFZpZXcgPSBsb2FkVmlldzsKdmFyIF9kZWZhdWx0ID0gcGVybWlzc2lvbjsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/libaojian/Desktop/Blockchain-APTrace-Fabric/blockchain-trace-pc/src/store/modules/permission.js"],"names":["permission","state","routes","addRoutes","mutations","SET_ROUTES","constantRoutes","concat","actions","GenerateRoutes","commit","Promise","resolve","then","res","accessedRoutes","filterAsyncRouter","data","push","path","redirect","hidden","asyncRouterMap","filter","route","component","Layout","loadView","children","length","view","require"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE,EADH;AAELC,IAAAA,SAAS,EAAE;AAFN,GADU;AAKjBC,EAAAA,SAAS,EAAE;AACTC,IAAAA,UAAU,EAAE,oBAACJ,KAAD,EAAQC,MAAR,EAAmB;AAC7BD,MAAAA,KAAK,CAACE,SAAN,GAAkBD,MAAlB;AACAD,MAAAA,KAAK,CAACC,MAAN,GAAeI,uBAAeC,MAAf,CAAsBL,MAAtB,CAAf;AACD;AAJQ,GALM;AAWjBM,EAAAA,OAAO,EAAE;AACP;AACAC,IAAAA,cAFO,gCAEoB;AAAA,UAAVC,MAAU,QAAVA,MAAU;AACzB,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B;AACA,gCAAaC,IAAb,CAAkB,UAAAC,GAAG,EAAI;AACvB,cAAMC,cAAc,GAAGC,iBAAiB,CAACF,GAAG,CAACG,IAAL,CAAxC;AACAF,UAAAA,cAAc,CAACG,IAAf,CAAoB;AAAEC,YAAAA,IAAI,EAAE,GAAR;AAAaC,YAAAA,QAAQ,EAAE,MAAvB;AAA+BC,YAAAA,MAAM,EAAE;AAAvC,WAApB;AACAX,UAAAA,MAAM,CAAC,YAAD,EAAeK,cAAf,CAAN;AACAH,UAAAA,OAAO,CAACG,cAAD,CAAP;AACD,SALD;AAMD,OARM,CAAP;AASD;AAZM;AAXQ,CAAnB,C,CA2BA;;AACA,SAASC,iBAAT,CAA2BM,cAA3B,EAA2C;AACzC,SAAOA,cAAc,CAACC,MAAf,CAAsB,UAAAC,KAAK,EAAI;AACpC,QAAIA,KAAK,CAACC,SAAV,EAAqB;AACnB;AACA,UAAID,KAAK,CAACC,SAAN,KAAoB,QAAxB,EAAkC;AAChCD,QAAAA,KAAK,CAACC,SAAN,GAAkBC,cAAlB;AACD,OAFD,MAEO;AACLF,QAAAA,KAAK,CAACC,SAAN,GAAkBE,QAAQ,CAACH,KAAK,CAACC,SAAP,CAA1B;AACD;AACF;;AACD,QAAID,KAAK,CAACI,QAAN,IAAkB,IAAlB,IAA0BJ,KAAK,CAACI,QAAhC,IAA4CJ,KAAK,CAACI,QAAN,CAAeC,MAA/D,EAAuE;AACrEL,MAAAA,KAAK,CAACI,QAAN,GAAiBZ,iBAAiB,CAACQ,KAAK,CAACI,QAAP,CAAlC;AACD;;AACD,WAAO,IAAP;AACD,GAbM,CAAP;AAcD;;AAEM,IAAMD,QAAQ,GAAG,SAAXA,QAAW,CAACG,IAAD,EAAU;AAAE;AAClC,SAAO,UAAClB,OAAD;AAAA,WAAcmB,OAAO,CAAC,mBAAYD,IAAZ,EAAD,EAAsBlB,OAAtB,CAArB;AAAA,GAAP;AACD,CAFM;;;eAIQZ,U","sourcesContent":["import { constantRoutes } from '@/router'\nimport { getRouters } from '@/api/menu'\nimport Layout from '@/layout/index'\n\nconst permission = {\n  state: {\n    routes: [],\n    addRoutes: []\n  },\n  mutations: {\n    SET_ROUTES: (state, routes) => {\n      state.addRoutes = routes\n      state.routes = constantRoutes.concat(routes)\n    }\n  },\n  actions: {\n    // 生成路由\n    GenerateRoutes({ commit }) {\n      return new Promise(resolve => {\n        // 向后端请求路由数据\n        getRouters().then(res => {\n          const accessedRoutes = filterAsyncRouter(res.data)\n          accessedRoutes.push({ path: '*', redirect: '/404', hidden: true })\n          commit('SET_ROUTES', accessedRoutes)\n          resolve(accessedRoutes)\n        })\n      })\n    }\n  }\n}\n\n// 遍历后台传来的路由字符串，转换为组件对象\nfunction filterAsyncRouter(asyncRouterMap) {\n  return asyncRouterMap.filter(route => {\n    if (route.component) {\n      // Layout组件特殊处理\n      if (route.component === 'Layout') {\n        route.component = Layout\n      } else {\n        route.component = loadView(route.component)\n      }\n    }\n    if (route.children != null && route.children && route.children.length) {\n      route.children = filterAsyncRouter(route.children)\n    }\n    return true\n  })\n}\n\nexport const loadView = (view) => { // 路由懒加载\n  return (resolve) =>  require([`@/views/${view}`], resolve)\n}\n\nexport default permission\n"]}]}