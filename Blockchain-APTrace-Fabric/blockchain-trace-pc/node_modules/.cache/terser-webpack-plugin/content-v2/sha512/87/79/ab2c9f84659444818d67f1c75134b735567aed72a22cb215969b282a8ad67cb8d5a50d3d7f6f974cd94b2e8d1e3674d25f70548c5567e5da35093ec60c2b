{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-37715629\"],{2912:function(t,e,o){},3645:function(t,e,o){\"use strict\";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"el-dialog\",{attrs:{center:\"\",title:\"区块详情\",visible:t.blockVisible,width:\"700px\",\"append-to-body\":\"\"},on:{\"update:visible\":function(e){t.blockVisible=e}}},[o(\"el-row\",{attrs:{gutter:20}},[o(\"el-col\",{attrs:{span:\"24\"}},[t._v(\" 编号：\"),o(\"el-tag\",[t._v(t._s(t.blockInfo.data.header.number))])],1),o(\"br\"),o(\"br\"),o(\"el-col\",{attrs:{span:\"24\"}},[t._v(\" 前置hash：\"+t._s(t.blockInfo.data.header.previous_hash)+\" \")]),o(\"br\"),o(\"br\"),o(\"el-col\",{attrs:{span:\"24\"}},[t._v(\" 数据hash：\"+t._s(t.blockInfo.data.header.data_hash)+\" \")]),o(\"br\"),o(\"br\"),o(\"el-col\",{attrs:{span:\"24\"}},[t._v(\" 交易ID：\"+t._s(t.blockInfo.data.data.data[0].payload.header.channel_header.tx_id)+\" \")]),o(\"br\"),o(\"br\"),o(\"el-col\",{attrs:{span:\"24\"}},[t._v(\" 时间戳：\"+t._s(t.blockInfo.data.data.data[0].payload.header.channel_header.timestamp)+\" \")]),o(\"br\"),o(\"br\"),o(\"el-col\",{attrs:{span:\"24\"}},[t._v(\" 通道：\"),o(\"el-tag\",{attrs:{type:\"success\"}},[t._v(t._s(t.blockInfo.data.data.data[0].payload.header.channel_header.channel_id))])],1),o(\"br\"),o(\"br\"),o(\"el-col\",{attrs:{span:\"24\"}},[t._v(\" 智能合约：\"),o(\"el-tag\",{attrs:{type:\"info\"}},[t._v(t._s(t.blockInfo.data.data.data[0].payload.data.actions[0].payload.action.proposal_response_payload.extension.chaincode_id.name))])],1),o(\"br\"),o(\"br\"),o(\"el-col\",{attrs:{span:\"24\"}},[t._v(\" 智能合约版本：\"),o(\"el-tag\",{attrs:{type:\"warning\"}},[t._v(t._s(t.blockInfo.data.data.data[0].payload.data.actions[0].payload.action.proposal_response_payload.extension.chaincode_id.version))])],1)],1)],1)},r=[],n={name:\"BlockInfo\",data:function(){return{blockInfo:{},blockVisible:!1,dataDetail:null}},methods:{init:function(t){this.blockVisible=!0,this.blockInfo=t,this.dataDetail=JSON.parse(t.data.data.data[0].payload.data.actions[0].payload.action.proposal_response_payload.extension.results.ns_rwset[0].rwset.writes[0].value)}}},i=n,s=o(\"2877\"),l=Object(s[\"a\"])(i,a,r,!1,null,\"ef50b1bc\",null);e[\"default\"]=l.exports},\"44cc\":function(t,e,o){\"use strict\";o(\"cfb6\")},5167:function(t,e,o){\"use strict\";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",{staticStyle:{height:\"700px\",overflow:\"auto\"}},[o(\"el-row\",{attrs:{gutter:30}},[o(\"el-col\",{attrs:{span:8}},[o(\"avue-data-tabs\",{attrs:{option:t.option}}),o(\"br\"),o(\"div\",[o(\"div\",[o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\"区块编号：\"+t._s(t.blockInfo.data.header.number))])],1),o(\"br\"),o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\" 前置Hash： \"),o(\"el-link\",{attrs:{type:\"success\"},on:{click:function(e){return t.queryInfo(t.blockInfo.data.header.previous_hash)}}},[t._v(t._s(t.blockInfo.data.header.previous_hash)),o(\"span\",{staticStyle:{color:\"red\"}},[t._v(\"(点击查看区块信息)\")])])],1)],1),o(\"br\"),o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\" 数据Hash： \"),o(\"el-link\",{attrs:{underline:!1,type:\"success\"}},[t._v(t._s(t.blockInfo.data.header.data_hash))])],1)],1)],1),o(\"div\",{attrs:{align:\"center\"}},[o(\"el-divider\",{attrs:{\"content-position\":\"left\"}},[o(\"i\",{staticClass:\"el-icon-top\"})])],1),o(\"div\",[o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\"区块编号：\"+t._s(t.previousBlockInfo.data.header.number))])],1),o(\"br\"),o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\" 前置Hash： \"),o(\"el-link\",{attrs:{type:\"success\"},on:{click:function(e){return t.queryInfo(t.previousBlockInfo.data.header.previous_hash)}}},[t._v(t._s(t.previousBlockInfo.data.header.previous_hash)),o(\"span\",{staticStyle:{color:\"red\"}},[t._v(\"(点击查看区块信息)\")])])],1)],1),o(\"br\"),o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\" 数据Hash： \"),o(\"el-link\",{attrs:{underline:!1,type:\"success\"}},[t._v(t._s(t.previousBlockInfo.data.header.data_hash))])],1)],1)],1),o(\"div\",{attrs:{align:\"center\"}},[o(\"el-divider\",{attrs:{\"content-position\":\"left\"}},[o(\"i\",{staticClass:\"el-icon-top\"})])],1),o(\"div\",[o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\"区块编号：\"+t._s(t.previousBlockInfo2.data.header.number))])],1),o(\"br\"),o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\" 前置Hash： \"),o(\"el-link\",{attrs:{type:\"success\"},on:{click:function(e){return t.queryInfo(t.previousBlockInfo2.data.header.previous_hash)}}},[t._v(\" \"+t._s(t.previousBlockInfo2.data.header.previous_hash)),o(\"span\",{staticStyle:{color:\"red\"}},[t._v(\"(点击查看区块信息)\")])])],1)],1),o(\"br\"),o(\"el-row\",[o(\"el-col\",{attrs:{span:24}},[t._v(\" 数据Hash： \"),o(\"el-link\",{attrs:{underline:!1,type:\"success\"}},[t._v(t._s(t.previousBlockInfo2.data.header.data_hash))])],1)],1)],1)])],1)],1),o(\"BlockInfo\",{ref:\"getBlockInfoRef\"})],1)},r=[],n=(o(\"a9e3\"),o(\"e9c4\"),o(\"bc3a\"),o(\"3645\")),i={components:{BlockInfo:n[\"default\"]},data:function(){return{queryBlockByNumDrawer:!1,channelBlockInfo:\"\",blockInfo:\"\",previousBlockInfo:\"\",previousBlockInfo2:\"\",open:!1,blockInfoHash:\"\",option:{data:[]},traceId:\"\",retailerInfo:\"\",productData:\"\",activeName:\"1\",cropsProcessDetailsArray:[],cropsDriverArray:[],machingInfo:\"\",operationArray:[],cropsDetails:\"\"}},created:function(){var t=this;this.$httpBlock.get(this.$httpUrl+\"/blockexplorerapi/channelBlockInfo\").then((function(e){t.channelBlockInfo=e;var o={title:\"区块高度\",subtitle:\"实时\",count:e.data.height.low,text:\"当前区块高度\",color:\"rgb(27, 201, 142)\",key:\"高\"};t.option.data.push(o);var a=Number(t.channelBlockInfo.data.height.low-1);t.$httpBlock.get(t.$httpUrl+\"/blockexplorerapi/queryBlockInfo?number=\"+a).then((function(e){t.blockInfo=e})).catch((function(t){console.log(\"err \"+t)}));var r=Number(t.channelBlockInfo.data.height.low-2);t.$httpBlock.get(t.$httpUrl+\"/blockexplorerapi/queryBlockInfo?number=\"+r).then((function(e){t.previousBlockInfo=e})).catch((function(t){console.log(\"err \"+t)}));var n=Number(t.channelBlockInfo.data.height.low-3);t.$httpBlock.get(t.$httpUrl+\"/blockexplorerapi/queryBlockInfo?number=\"+n).then((function(e){t.previousBlockInfo2=e})).catch((function(t){console.log(\"err \"+t)}))})).catch((function(t){console.log(\"err \"+t)}))},methods:{handleClick:function(){var t=this;\"1\"===this.activeName&&this.$httpBlock.get(this.$httpUrl+\"/farmerapi/queryCropsProcessByCropsId?id=\"+this.productData.crops_id).then((function(e){for(var o=[],a=0;a<e.data.length;a++)o.push(e.data[a].Record);t.cropsProcessDetailsArray=o})).catch((function(t){})),\"2\"===this.activeName&&this.$httpBlock.get(this.$httpUrl+\"/driverapi/queryTransportByCropsId?id=\"+this.productData.crops_id).then((function(e){var o=[];t.len=e.data.length;for(var a=0;a<e.data.length;a++)o.push(e.data[a].Record);t.cropsDriverArray=o})).catch((function(t){})),\"3\"===this.activeName&&this.$httpBlock.get(this.$httpUrl+\"/materialapi/queryMachiningByCropsId?id=\"+this.productData.crops_id).then((function(e){t.machingInfo=e.data[0].Record})).catch((function(t){})),\"4\"===this.activeName&&this.$httpBlock.get(this.$httpUrl+\"/productapi/queryOperationByCropsId?id=\"+this.productData.crops_id).then((function(e){for(var o=[],a=0;a<e.data.length;a++)o.push(e.data[a].Record);t.operationArray=o})).catch((function(e){t.msgError(\"查询异常 \"+e)})),\"5\"===this.activeName&&this.$httpBlock.get(this.$httpUrl+\"/farmerapi/queryCropsById?id=\"+this.productData.crops_id).then((function(e){t.cropsDetails=e.data})).catch((function(t){}))},query:function(){var t=this;this.$httpBlock.get(this.$httpUrl+\"/retailerapi/queryRetailerById?id=\"+this.traceId).then((function(e){t.retailerInfo=e.data,t.$httpBlock.get(t.$httpUrl+\"/productapi/queryProductInfoByCropsId?id=\"+e.data.crops_id).then((function(e){t.productData=e.data[0].Record,t.handleClick()})).catch((function(e){t.msgError(\"查询异常 \"+e)}))})).catch((function(t){console.log(\"调用失败 \"+JSON.stringify(t))}))},queryInfo:function(t){var e=this;this.open=!0,this.$httpBlock.get(this.$httpUrl+\"/blockexplorerapi/queryBlockBuHash?hash=\"+t).then((function(t){e.blockInfoHash=t,e.$refs.getBlockInfoRef.init(t)})).catch((function(t){console.log(\"err \"+t)}))},getHash:function(){var t=this,e=Number(this.channelBlockInfo.data.height.low);this.$httpBlock.get(this.$httpUrl+\"/blockexplorerapi/queryBlockInfo?number=\"+e).then((function(e){t.blockInfo=e})).catch((function(t){console.log(\"err \"+t)}))},queryBlockByNum:function(){this.queryBlockByNumDrawer=!0}}},s=i,l=(o(\"44cc\"),o(\"2877\")),c=Object(l[\"a\"])(s,a,r,!1,null,\"0e0c30a5\",null);e[\"default\"]=c.exports},cfb6:function(t,e,o){},dd7b:function(t,e,o){\"use strict\";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",{staticClass:\"login\"},[o(\"el-form\",{ref:\"loginForm\",staticClass:\"login-form\",attrs:{model:t.loginForm,rules:t.loginRules}},[o(\"h3\",{staticClass:\"title\"},[t._v(\"基于区块链的资源协调平台\")]),o(\"el-form-item\",{attrs:{prop:\"username\"}},[o(\"el-input\",{attrs:{type:\"text\",\"auto-complete\":\"off\",placeholder:\"账号\"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,\"username\",e)},expression:\"loginForm.username\"}},[o(\"svg-icon\",{staticClass:\"el-input__icon input-icon\",attrs:{slot:\"prefix\",\"icon-class\":\"user\"},slot:\"prefix\"})],1)],1),o(\"el-form-item\",{attrs:{prop:\"password\"}},[o(\"el-input\",{attrs:{type:\"password\",\"auto-complete\":\"off\",placeholder:\"密码\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,\"password\",e)},expression:\"loginForm.password\"}},[o(\"svg-icon\",{staticClass:\"el-input__icon input-icon\",attrs:{slot:\"prefix\",\"icon-class\":\"password\"},slot:\"prefix\"})],1)],1),o(\"el-form-item\",{attrs:{prop:\"code\"}},[o(\"el-input\",{staticStyle:{width:\"63%\"},attrs:{\"auto-complete\":\"off\",placeholder:\"验证码\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleLogin(e)}},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,\"code\",e)},expression:\"loginForm.code\"}},[o(\"svg-icon\",{staticClass:\"el-input__icon input-icon\",attrs:{slot:\"prefix\",\"icon-class\":\"validCode\"},slot:\"prefix\"})],1),o(\"div\",{staticClass:\"login-code\"},[o(\"img\",{staticClass:\"login-code-img\",attrs:{src:t.codeUrl},on:{click:t.getCode}})])],1),o(\"el-checkbox\",{staticStyle:{margin:\"0px 0px 25px 0px\"},model:{value:t.loginForm.rememberMe,callback:function(e){t.$set(t.loginForm,\"rememberMe\",e)},expression:\"loginForm.rememberMe\"}},[t._v(\"记住密码\")]),o(\"el-form-item\",{staticStyle:{width:\"100%\"}},[o(\"el-button\",{staticStyle:{width:\"100%\"},attrs:{loading:t.loading,size:\"medium\",type:\"primary\"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t.loading?o(\"span\",[t._v(\"登 录 中...\")]):o(\"span\",[t._v(\"登 录\")])])],1),o(\"el-form-item\",{staticStyle:{width:\"100%\"}},[o(\"el-button\",{staticStyle:{width:\"100%\"},attrs:{size:\"medium\",type:\"success\"},nativeOn:{click:function(e){return e.preventDefault(),t.roTrace(e)}}},[o(\"span\",[t._v(\"链上数据查看\")])])],1)],1),o(\"el-dialog\",{attrs:{title:\"链上数据详情\",visible:t.drawer,width:\"95%\"},on:{\"update:visible\":function(e){t.drawer=e}}},[o(\"el-divider\",{attrs:{\"content-position\":\"left\"}},[t._v(\"区块信息\")]),o(\"div\",[o(\"Trace\")],1)],1)],1)},r=[],n=o(\"7ded\"),i=o(\"a78e\"),s=o.n(i),l=o(\"720d\"),c=o.n(l),d=\"MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH\\nnzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==\",u=\"MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY\\n7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN\\nPuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA\\nkM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow\\ncSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv\\nDQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh\\nYhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3\\nUP8iWi1Qw0Y=\";function p(t){var e=new c.a;return e.setPublicKey(d),e.encrypt(t)}function h(t){var e=new c.a;return e.setPrivateKey(u),e.decrypt(t)}var f=o(\"5167\"),m={name:\"Login\",data:function(){return{codeUrl:\"\",cookiePassword:\"\",loginForm:{username:\"admin\",password:\"admin123\",rememberMe:!1,code:\"\",uuid:\"\"},loginRules:{username:[{required:!0,trigger:\"blur\",message:\"用户名不能为空\"}],password:[{required:!0,trigger:\"blur\",message:\"密码不能为空\"}],code:[{required:!0,trigger:\"change\",message:\"验证码不能为空\"}]},loading:!1,redirect:void 0,drawer:!1}},components:{Trace:f[\"default\"]},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},created:function(){this.getCode(),this.getCookie()},methods:{roTrace:function(){this.drawer=!0},getCode:function(){var t=this;Object(n[\"a\"])().then((function(e){t.codeUrl=\"data:image/gif;base64,\"+e.img,t.loginForm.uuid=e.uuid}))},getCookie:function(){var t=s.a.get(\"username\"),e=s.a.get(\"password\"),o=s.a.get(\"rememberMe\");this.loginForm={username:void 0===t?this.loginForm.username:t,password:void 0===e?this.loginForm.password:h(e),rememberMe:void 0!==o&&Boolean(o)}},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){e&&(t.loading=!0,t.loginForm.rememberMe?(s.a.set(\"username\",t.loginForm.username,{expires:30}),s.a.set(\"password\",p(t.loginForm.password),{expires:30}),s.a.set(\"rememberMe\",t.loginForm.rememberMe,{expires:30})):(s.a.remove(\"username\"),s.a.remove(\"password\"),s.a.remove(\"rememberMe\")),t.$store.dispatch(\"Login\",t.loginForm).then((function(){t.$router.push({path:t.redirect||\"/\"})})).catch((function(){t.loading=!1,t.getCode()})))}))}}},v=m,g=(o(\"eecc\"),o(\"2877\")),k=Object(g[\"a\"])(v,a,r,!1,null,null,null);e[\"default\"]=k.exports},eecc:function(t,e,o){\"use strict\";o(\"2912\")}}]);","extractedComments":[]}